<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BeLeasing - Checkout</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    
    <style>
        /* System Font Stack to avoid Google Fonts/Gstatic */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            background-color: #f8f9fa; /* Light grey background for the page */
        }
        
        /* Sticky Order Summary on desktop */
        @media (min-width: 992px) {
            .order-summary-sticky {
                position: sticky;
                top: 20px; /* Space from the top when it becomes sticky */
            }
        }
        
        /* Custom progress bar styles (optional, but good for UX) */
        .checkout-progress .nav-link {
            border-bottom: 3px solid transparent;
            color: #6c757d;
            padding-bottom: .5rem;
        }
        .checkout-progress .nav-link.active {
            border-color: #0d6efd; /* Primary Bootstrap color for active step */
            color: #212529;
            font-weight: 600;
        }

        /* Form styling adjustments for aesthetics */
        .form-check-input:checked {
            background-color: #0d6efd;
            border-color: #0d6efd;
        }
    </style>
</head>
<body>

    <header class="bg-white shadow-sm mb-4">
        <div class="container py-3">
            <a class="navbar-brand logo h1 mb-0" href="index.html">
                <strong class="text-dark">be</strong><span class="text-secondary">leasing</span>
            </a>
        </div>
    </header>

    <div class="container py-3 py-md-5">
        <h1 class="mb-4 display-6 fw-bold">Checkout</h1>
        
        <nav class="checkout-progress mb-5" aria-label="Checkout progress">
            <ul class="nav nav-pills d-flex flex-nowrap overflow-auto text-nowrap justify-content-between">
                <li class="nav-item flex-fill text-center">
                    <a class="nav-link disabled" href="#" aria-disabled="true">Cart</a>
                </li>
                <li class="nav-item flex-fill text-center">
                    <a class="nav-link active" aria-current="page" href="#">Address</a>
                </li>
                <li class="nav-item flex-fill text-center">
                    <a class="nav-link disabled" href="#" aria-disabled="true">Payment</a>
                </li>
                <li class="nav-item flex-fill text-center">
                    <a class="nav-link disabled" href="#" aria-disabled="true">Review</a>
                </li>
            </ul>
        </nav>
        
        <div class="row g-4">
            
            <div class="col-12 col-lg-7 order-lg-1">
                <form class="needs-validation" id="checkoutForm" novalidate>
                    
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-white">
                            <h2 class="h5 mb-0">1. Customer & Shipping Details</h2>
                        </div>
                        <div class="card-body row g-3">
                            <div class="col-sm-6">
                                <label for="fullName" class="form-label">Full Name</label>
                                <input type="text" class="form-control" id="fullName" placeholder="John Smith" required>
                                <div class="invalid-feedback">Full name is required.</div>
                            </div>
                            
                            <div class="col-sm-6">
                                <label for="email" class="form-label">Email</label>
                                <input type="email" class="form-control" id="email" placeholder="you@example.com" required>
                                <div class="invalid-feedback">A valid email is required.</div>
                            </div>

                            <div class="col-12">
                                <label for="phone" class="form-label">Phone</label>
                                <input type="tel" class="form-control" id="phone" placeholder="(123) 456-7890" aria-describedby="phoneHelp" required>
                                <div id="phoneHelp" class="form-text">We'll use this for delivery updates.</div>
                                <div class="invalid-feedback">A valid phone number is required.</div>
                            </div>
                            
                            <div class="col-12">
                                <label for="address" class="form-label">Address</label>
                                <input type="text" class="form-control" id="address" placeholder="1234 Main St" required>
                                <div class="invalid-feedback">Shipping address is required.</div>
                            </div>
                            
                            <div class="col-md-5">
                                <label for="city" class="form-label">City</label>
                                <input type="text" class="form-control" id="city" required>
                                <div class="invalid-feedback">City is required.</div>
                            </div>
                            
                            <div class="col-md-3">
                                <label for="zip" class="form-label">Postal Code</label>
                                <input type="text" class="form-control" id="zip" required>
                                <div class="invalid-feedback">Postal code is required.</div>
                            </div>

                            <div class="col-md-4">
                                <label for="country" class="form-label">Country</label>
                                <select class="form-select" id="country" required>
                                    <option value="">Choose...</option>
                                    <option>United States</option>
                                    <option>Canada</option>
                                    <option>Australia</option>
                                </select>
                                <div class="invalid-feedback">Please select a valid country.</div>
                            </div>
                            
                            <div class="col-12 mt-4">
                                <div class="form-check">
                                    <input type="checkbox" class="form-check-input" id="sameAddress" checked>
                                    <label class="form-check-label" for="sameAddress">Billing address is the same as shipping address</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-white">
                            <h2 class="h5 mb-0">2. Payment Method</h2>
                        </div>
                        <div class="card-body g-3">
                            <div class="my-3">
                                <div class="form-check">
                                    <input id="credit" name="paymentMethod" type="radio" class="form-check-input" checked required>
                                    <label class="form-check-label" for="credit">Credit/Debit Card</label>
                                </div>
                                <div class="form-check">
                                    <input id="cod" name="paymentMethod" type="radio" class="form-check-input" required>
                                    <label class="form-check-label" for="cod">Cash on Delivery (COD)</label>
                                </div>
                                <div class="form-check">
                                    <input id="wallet" name="paymentMethod" type="radio" class="form-check-input" required>
                                    <label class="form-check-label" for="wallet">Digital Wallet</label>
                                </div>
                            </div>

                            <div class="row g-3" id="cardFields">
                                <div class="col-sm-6">
                                    <label for="cc-name" class="form-label">Name on card</label>
                                    <input type="text" class="form-control" id="cc-name" required>
                                    <div class="invalid-feedback">Name on card is required.</div>
                                </div>

                                <div class="col-sm-6">
                                    <label for="cc-number" class="form-label">Credit card number</label>
                                    <input type="text" class="form-control" id="cc-number" pattern="[0-9\s-]{13,19}" placeholder="XXXX XXXX XXXX XXXX" required>
                                    <div class="invalid-feedback">Card number is required (13-19 digits).</div>
                                </div>

                                <div class="col-sm-6">
                                    <label for="cc-expiration" class="form-label">Expiration</label>
                                    <input type="text" class="form-control" id="cc-expiration" pattern="(0[1-9]|1[0-2])\/[0-9]{2}" placeholder="MM/YY" required>
                                    <div class="invalid-feedback">Expiration date required (MM/YY format).</div>
                                </div>

                                <div class="col-sm-6">
                                    <label for="cc-cvv" class="form-label">CVV</label>
                                    <input type="text" class="form-control" id="cc-cvv" pattern="[0-9]{3,4}" required>
                                    <div class="invalid-feedback">Security code required (3-4 digits).</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow-sm">
                        <div class="card-body">
                            <h2 class="h5 mb-3">3. Review & Place Order</h2>
                            <div class="form-check mb-3">
                                <input type="checkbox" class="form-check-input" id="termsCheck" required>
                                <label class="form-check-label" for="termsCheck">I agree to the <a href="#" class="text-decoration-none">Terms and Conditions</a> and all order details are correct.</label>
                                <div class="invalid-feedback">You must agree to the terms and conditions before placing the order.</div>
                            </div>
                            
                            <button class="w-100 btn btn-primary btn-lg" type="submit" id="placeOrderBtn" disabled>Place Order</button>
                        </div>
                    </div>
                </form>
            </div>
            
            <div class="col-12 col-lg-5 order-lg-2">
                <div class="order-summary-sticky">
                    <div class="card shadow-sm">
                        <div class="card-header bg-primary text-white">
                            <h2 class="h5 mb-0">Order Summary</h2>
                        </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex justify-content-between lh-sm">
                                <div>
                                    <h6 class="my-0">Mercedes-Benz C-Class</h6>
                                    <small class="text-muted">Lease Deposit (1 month)</small>
                                </div>
                                <span class="text-dark">$799.00</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between lh-sm">
                                <div>
                                    <h6 class="my-0">Premium Protection Plan</h6>
                                    <small class="text-muted">36 Months</small>
                                </div>
                                <span class="text-dark">$150.00</span>
                            </li>
                            <li class="list-group-item bg-light">
                                <form class="input-group">
                                    <input type="text" class="form-control" placeholder="Promo code" aria-label="Apply coupon">
                                    <button class="btn btn-secondary" type="button">Apply</button>
                                </form>
                            </li>
                            
                            <li class="list-group-item d-flex justify-content-between">
                                <span>Subtotal (2 items)</span>
                                <strong>$949.00</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>Shipping</span>
                                <strong>$0.00</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>Tax (10%)</span>
                                <strong>$94.90</strong>
                            </li>
                            
                            <li class="list-group-item d-flex justify-content-between bg-light">
                                <span class="fw-bold">Grand Total (CAD)</span>
                                <strong class="text-primary">$1,043.90</strong>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            'use strict'
            
            const form = document.getElementById('checkoutForm');
            const termsCheckbox = document.getElementById('termsCheck');
            const placeOrderBtn = document.getElementById('placeOrderBtn');
            const cardMethod = document.getElementById('credit');
            const cardFields = document.getElementById('cardFields');
            
            function toggleCardFields() {
                if (cardMethod.checked) {
                    cardFields.classList.remove('d-none');
                } else {
                    cardFields.classList.add('d-none');
                }
            }

            toggleCardFields();
            document.querySelectorAll('input[name="paymentMethod"]').forEach(radio => {
                radio.addEventListener('change', toggleCardFields);
            });


            function togglePlaceOrderButton() {
                placeOrderBtn.disabled = !termsCheckbox.checked;
            }

            togglePlaceOrderButton();
            termsCheckbox.addEventListener('change', togglePlaceOrderButton);


            form.addEventListener('submit', function (event) {
                if (!form.checkValidity()) {
                    event.preventDefault();
                    event.stopPropagation();
                } else {
                    if (cardMethod.checked) {
                        const cardName = document.getElementById('cc-name');
                        const cardNumber = document.getElementById('cc-number');
                        const cardExpiry = document.getElementById('cc-expiration');
                        const cardCvv = document.getElementById('cc-cvv');
                        
                        let cardValid = true;
                        
                        if (!cardName.checkValidity()) { cardValid = false; cardName.classList.add('is-invalid'); }
                        if (!cardNumber.checkValidity()) { cardValid = false; cardNumber.classList.add('is-invalid'); }
                        if (!cardExpiry.checkValidity()) { cardValid = false; cardExpiry.classList.add('is-invalid'); }
                        if (!cardCvv.checkValidity()) { cardValid = false; cardCvv.classList.add('is-invalid'); }

                        if (!cardValid) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                    }

                    
                    if (form.checkValidity() && (!cardMethod.checked || cardValid)) {
                        event.preventDefault();
                        placeOrderBtn.textContent = 'Processing...';
                        placeOrderBtn.classList.add('disabled');
                        
                        setTimeout(() => {
                            alert("Order Placed Successfully! (Simulation)");
                            window.location.reload();
                        }, 1500);
                    }
                }

                form.classList.add('was-validated');
            }, false);

        });
    </script>

</body>
</html>